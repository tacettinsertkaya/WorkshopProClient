<div class="row">
  <div class="col-md-12">
    <div class="card">
      <div class="card-header">
        <div class="row">
          <div class="col-sm-6">
            <h5 class="card-title">ELEKTRONİK YAZI TAHTASI</h5>
            <p>
              Bu oturumda fikirler anonim olarak alınmaktadır. Şu ana kadar
              aşağıdaki {{ this.messages.length }} fikir ileri sürülmüştür.
              Yorumlarınızı “Yorum Yap” linkini tıklayarak ekleyebilirsiniz.
            </p>
          </div>
          <div class="col-sm-6">
            <h5
              *ngIf="retroRight != null"
              class="float-right"
              [ngClass]="
                retroRight.commentRight > 0 ? 'text-success' : 'text-danger'
              "
            >
              Yorum Hakkı:{{ retroRight.commentRight }}
            </h5>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngFor="let msg of messages">
  <div class="row">
    <div class="col-md-12">
      <div class="card">
        <div class="card-header">
          <p>
            {{ msg.messageText }}
          </p>
        </div>
        <div class="card-footer">
          <button
            type="button"
            [disabled]="retroRight.commentRight <= 0"
            (click)="addCommentModal(msg)"
            class="btn btn-primary float-right btn-round"
          >
            Yorum Yap
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="row" *ngFor="let com of msg.comments">
    <div class="offset-sm-1 col-sm-11">
      <div class="card bg-primary">
        <div class="card-body">
          <p class="text-white">
            {{ com.commentText }}
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<div
  class="modal fade"
  id="commentModal"
  tabindex="-1"
  role="dialog"
  aria-labelledby="ModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header justify-content-center">
        <button
          type="button"
          class="close"
          data-dismiss="modal"
          aria-label="Close"
        >
          <i class="nc-icon nc-simple-remove"></i>
        </button>
        <h4 class="title title-up">Yorum</h4>
      </div>
      <div class="modal-body">
        <textarea
          style="padding: 5px; max-height: 300px !important; height: 200px"
          class="form-control textarea"
          [disabled]="retroRight.commentRight == 0"
          [(ngModel)]="commentText"
          (keydown.enter)="sendComment()"
        ></textarea>
      </div>
      <div class="modal-footer">
        <div class="left-side">
          <button
            type="button"
            class="btn btn-default btn-link"
            data-dismiss="modal"
          >
            Vazgeç
          </button>
        </div>
        <div class="divider"></div>
        <div class="right-side">
          <button
            type="button"
            (click)="sendComment()"
            class="btn btn-success btn-link"
          >
            Gönder
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
<style>
  .modal-body {
    padding: 20px 10px;
  }
</style>
